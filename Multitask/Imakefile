
#include <config/sci.cf>

#ifdef SCI_DIR_Multitask

#ifdef SCI_QUARKS
#define TASK_IMPLEMENTATION_O  Task_Quarks.o
#define TASK_IMPLEMENTATION_CC Task_Quarks.cc
#else

#ifdef SCI_MACHINE_SGI
#define TASK_IMPLEMENTATION_O  Task_irix.o
#define TASK_IMPLEMENTATION_CC Task_irix.cc
LOCKS = lock.o

lock.o: lock_mips.s
	as -o lock.o lock_mips.s -mips4
#endif

#ifdef SCI_MACHINE_SOLARIS
#define TASK_IMPLEMENTATION_O  Task_solaris.o
#define TASK_IMPLEMENTATION_CC Task_solaris.cc
#endif

#ifdef SCI_MACHINE_Linux
#define TASK_IMPLEMENTATION_O Task_linux.o
#define TASK_IMPLEMENTATION_CC Task_linux.cc
#endif

#endif

#ifndef TASK_IMPLEMENTATION_O
#error "This machine does not have a Task library port..."
#endif
#ifndef TASK_IMPLEMENTATION_CC
#error "This machine does not have a Task library port..."
#endif

OBJS = ITC.o  Task.o  TASK_IMPLEMENTATION_O  $(LOCKS)
SRCS = ITC.cc Task.cc TASK_IMPLEMENTATION_CC

LIBNAME = Multitask

SO_LIBS =
SO_LDFLAGS = -L$(TOP)/lib -lMalloc -lC -lc

SCIDependTarget($(SRCS))
SCIObjLibraryTarget($(LIBNAME),$(OBJS),$(SO_LIBS),$(SO_LDFLAGS))

#else
all:
depend::

           RM_CMD = $(RM) *.CKP *.ln *.BAK *.bak core errs ,* *~ .emacs_* tags TAGS make.log MakeOut

#endif
