
#include <config/sci.cf>

#if defined(SCI_COMPILER_GNU) || 1
TMPL_DIR = gnupt
TMPL_LIB = gnupt/libgnupt.o
#else
TMPL_DIR =
TMPL_LIB =
#endif

SUBDIRS = Malloc tcl Multitask Classlib TCL Math Comm Geometry \
	Devices Constraints Geom Dataflow Datatypes Widgets \
	Modules $(TMPL_DIR) convert

SCISubdirs($(SUBDIRS))

#ifdef SCI_COMPILER_CFRONT
TMPLHACK_SRCS = tmpl_hack.cc
TMPLHACK_OBJS = tmpl_hack.o
#else
TMPLHACK_SRCS =
TMPLHACK_OBJS =
#endif


SR_TARGET = sr
SR_SRCS = scirun.cc $(TMPLHACK_SRCS)
SR_OBJS = scirun.o  $(TMPLHACK_OBJS)

SR_LDFLAGS = -L$(TOP)/lib -lDataflow -lDevices -lTCL -lMultitask -lMalloc
SCIProgramTarget($(SR_TARGET), $(SR_OBJS), $(SR_LIBS), $(SR_LDFLAGS))

sr: lib/libDataflow.so lib/libTCL.so lib/libDevices.so \
	lib/libTCL.so lib/libMultitask.so lib/libMalloc.so

SRCS = $(SR_SRCS)
SCIDependTarget($(SRCS))

World:
	make Makefile
	make Makefiles
	make depend
	make

update:
	cvs update -d
	make World

clean::
	rm -rf templates
