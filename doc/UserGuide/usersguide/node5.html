<!--Converted with LaTeX2HTML 98.1p1 release (March 2nd, 1998)
originally by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>4. Working with Networks</TITLE>
<META NAME="description" CONTENT="4. Working with Networks">
<META NAME="keywords" CONTENT="usersguide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="usersguide.css">
<LINK REL="next" HREF="node6.html">
<LINK REL="previous" HREF="node4.html">
<LINK REL="up" HREF="usersguide.html">
<LINK REL="next" HREF="node6.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html162"
 HREF="node6.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html158"
 HREF="usersguide.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html152"
 HREF="node4.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html160"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A> 
<A NAME="tex2html161"
 HREF="node9.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html163"
 HREF="node6.html">5. Visualization with the</A>
<B> Up:</B> <A NAME="tex2html159"
 HREF="usersguide.html">No Title</A>
<B> Previous:</B> <A NAME="tex2html153"
 HREF="node4.html">3. Starting SCIRun</A>
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><strong>Subsections</strong></A>
<UL>
<LI><A NAME="tex2html164"
 HREF="node5.html#SECTION00051000000000000000">4.1 Creating a Module</A>
<LI><A NAME="tex2html165"
 HREF="node5.html#SECTION00052000000000000000">4.2 Anatomy of a Module</A>
<LI><A NAME="tex2html166"
 HREF="node5.html#SECTION00053000000000000000">4.3 Creating a Connection</A>
<LI><A NAME="tex2html167"
 HREF="node5.html#SECTION00054000000000000000">4.4 Setting Module Properties</A>
<LI><A NAME="tex2html168"
 HREF="node5.html#SECTION00055000000000000000">4.5 Executing a Network</A>
<LI><A NAME="tex2html169"
 HREF="node5.html#SECTION00056000000000000000">4.6 Deleting a Connection</A>
<LI><A NAME="tex2html170"
 HREF="node5.html#SECTION00057000000000000000">4.7 Selecting Modules</A>
<LI><A NAME="tex2html171"
 HREF="node5.html#SECTION00058000000000000000">4.8 Moving Module(s)</A>
<LI><A NAME="tex2html172"
 HREF="node5.html#SECTION00059000000000000000">4.9 Destroying Module(s)</A>
<LI><A NAME="tex2html173"
 HREF="node5.html#SECTION000510000000000000000">4.10 Documenting a Module</A>
<LI><A NAME="tex2html174"
 HREF="node5.html#SECTION000511000000000000000">4.11 Viewing a Module's Log</A>
<LI><A NAME="tex2html175"
 HREF="node5.html#SECTION000512000000000000000">4.12 Documenting a Network</A>
<LI><A NAME="tex2html176"
 HREF="node5.html#SECTION000513000000000000000">4.13 Saving a Network</A>
<LI><A NAME="tex2html177"
 HREF="node5.html#SECTION000514000000000000000">4.14 Opening a Network</A>
<LI><A NAME="tex2html178"
 HREF="node5.html#SECTION000515000000000000000">4.15 Navigating a Network</A>
<LI><A NAME="tex2html179"
 HREF="node5.html#SECTION000516000000000000000">4.16 The <EM>SCIRun</EM> Shell</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION00050000000000000000">&#160;</A>
<A NAME="sec:workwithnets">&#160;</A>
<BR>
4. Working with Networks
</H1>

<P>
This section describes how to create, save, open, execute, and edit
networks.

<P> When started with no arguments, the <TT>scirun</TT> command will create a 
  main window with a blank network pane. The goal then is to create and connect 
  modules to form a network. 
<P>

<blockquote> 
  <H2><A NAME="SECTION00051000000000000000">&#160;</A> <A NAME="sec:creatingmodules">&#160;</A> 
    <BR>
    4.1 Creating a Module </H2>
</blockquote>
<ul>
  <li> Select its name from one of the package menus (<em>e.g.,</em> <em>SCIRun</em>)category 
    sub-menus. The package menus may be accessed from the main window's menu bar 
    and from the network pane's pop-up menu. </li>
  <li> Activate the network pane's pop-up menu by clicking mouse button three 
    while the mouse pointer is in the network pane (but not over a module or connection). 
    The pop-up menu contains a list of category sub-menus from the <EM>SCIRun</EM> 
    package and other installed packages. And each category sub-menu provides 
    access to the modules within the category.</li>
</ul>
<blockquote>
  <H2><A NAME="SECTION00052000000000000000">&#160;</A> <A NAME="sec:modanatomy">&#160;</A> 
    <BR>
    4.2 Anatomy of a Module </H2>
</blockquote>
<P> Upon creating a module, its graphic ``front end'' will be created and placed 
  in the network pane. All modules are represented similarly by a graphic within 
  the network pane. See Figure&nbsp;<A HREF="node5.html#fig:modgraphic">3</A>. 
  This graphical ``front end'' is the same for all modules and consists of the 
  following components: 
<P>
<DL>
<DT><STRONG>Name</STRONG>
<DD>The module's name.
  <DT><STRONG>Input Ports</STRONG> 
    <DD>Zero or more input ports are located on the top of the module. Each port 
    corresponds to a data type and each data type has a unique color. Table&nbsp;<A HREF="node5.html#tab:portcolors">1</A> 
    maps port colors to data types. Input ports connect to other modules' output 
    ports. Connections can only be made between ports of the same type. 
  <DT><STRONG>Output Ports</STRONG> 
    <DD>Zero or more output ports are located on the bottom of the module. Output 
    ports connect to other modules' input ports. Every module has, of course, 
    at least one input or one output port. 
  <DT><STRONG>UI Button</STRONG> 
    <DD>Pressing the <B>&quot;UI</B>&quot; button displays the module's control 
    dialog. Some modules have no such dialog, or have very simple dialogs. Some 
    modules have very complex dialogs which allow elaborate control over the module. 
    Figure&nbsp;<A HREF="node5.html#fig:moddialog">4</A> shows the control dialog 
    for <TT>the Show Field</TT> module. 
  <DT><STRONG>Progress Bar</STRONG> 
  <DD>The progress bar shows the module's progress. 
  <DT><STRONG>Timer</STRONG>
  <DD>The timer displays the amount of CPU time the module has consumed, located 
    to the left of the progress bar. 
  <DT><STRONG>Pop-up Menu</STRONG>
  <DD>Clicking mouse button three while the mouse points over a module provides 
    access to the module's pop-up menu. The pop-up menu gives access to the following 
    items: 
    <DL>
<DT><STRONG>::Package_Category_Name_Instance</STRONG>
      <DD>This item is a label (not a selectable item), and provides the name, 
        category and package to which to module belongs. The &quot;Instance&quot; 
        is a unique number which distinguishes multiple instances of the same 
        module. 
      <DT><STRONG><B>Execute</B></STRONG>
<DD>Executes the network.
  <DT><STRONG><B>Notes</B></STRONG>
      <DD>This item displays the module's notepad. Use the notepad to document 
        the purpose of the module in the current network. 
      <DT><STRONG><B>Destroy</B></STRONG>
<DD>Destroys the module.
  <DT><STRONG><B>Show Log</B></STRONG>
<DD>Displays the module's message log.  Most modules will
    write messages to their log during the course of their execution.
  <DT><STRONG><B>Show Status</B></STRONG>
      <DD>This item is a toggle button which turns the progress indicator display 
        off/on. Turning the progress indicator &quot;off&quot; can help speed 
        up the execution of complex networks. 
    </DL></DL>
<P>
<BR>
<DIV ALIGN="CENTER"><A NAME="1169">&#160;</A>
<TABLE>
<CAPTION><STRONG>Table 1:</STRONG>
Data Types and their Port Colors</CAPTION>
<TR><TD>
  <DIV ALIGN="CENTER">
<TABLE CELLPADDING=3 BORDER="1" ALIGN="CENTER">
<TR><TH ALIGN="LEFT"><B>Data Type</B></TH>
<TH ALIGN="LEFT"><B>Port Color</B></TH>
</TR>
<TR><TD ALIGN="LEFT">Field</TD>
<TD ALIGN="LEFT">Yellow</TD>
</TR>
<TR><TD ALIGN="LEFT">Field Set</TD>
<TD ALIGN="LEFT">Green</TD>
</TR>
<TR><TD ALIGN="LEFT">Matrices</TD>
<TD ALIGN="LEFT">Blue</TD>
</TR>
<TR><TD ALIGN="LEFT">Geometric Objects</TD>
<TD ALIGN="LEFT">Pink</TD>
</TR>
<TR><TD ALIGN="LEFT">Color Maps</TD>
<TD ALIGN="LEFT">Purple</TD>
</TR>
<TR><TD ALIGN="LEFT">Camera Path</TD>
<TD ALIGN="LEFT">Brown</TD>
</TR>
</TABLE>    
    <A NAME="tab:portcolors">&#160;</A>  </DIV></TD></TR>
</TABLE>
</DIV>
<BR>
<P>
<BR>
<DIV ALIGN="CENTER"><A NAME="fig:modgraphic">&#160;</A><A NAME="1279">&#160;</A>
<TABLE WIDTH="50%">
<CAPTION><STRONG>Figure 3:</STRONG>
Module Graphic (<TT>Show
      Field</TT> Module)</CAPTION>
<TR><TD><IMG
  WIDTH="256" ALIGN="TOP"
 SRC="../figures/modgraphic-1.gif"
 ALT="SCIRun Module Graphic"></TD></TR>
</TABLE>
</DIV>
<BR>
<P>
<BR>
<DIV ALIGN="CENTER"><A NAME="fig:moddialog">&#160;</A><A NAME="1280">&#160;</A>
<TABLE WIDTH="50%">
<CAPTION><STRONG>Figure 4:</STRONG>
Module Control Dialog (<TT>Show
      Field</TT> Module)</CAPTION>
<TR><TD><IMG
  ALIGN="TOP"
 SRC="../figures/moddialog.jpg"
 ALT="SCIRun Module Dialog"></TD></TR>
</TABLE>
</DIV>
<BR>
<P>

<H2><A NAME="SECTION00053000000000000000">&#160;</A>
<A NAME="sec:connectmods">&#160;</A>
<BR>
4.3 Creating a Connection
</H2>

<ul>
  <li> Mouse button two connects the output/input port of one module to the input/output 
    port of another module. </li>
  <li> Position the mouse pointer over a module's input/output port. Press button 
    two and drag the mouse pointer towards another module's output/input port. 
  </li>
  <li> Upon pressing button two, the program shows all valid connections as black 
    lines. It also draws one red-colored connection, making the connection by 
    releasing button two. </li>
  <li> Make the final connection by releasing button two while the pointer is 
    over the desired destination port or when the red colored connection is the 
    desired one. The connection will be drawn using an appropriate data type color. 
  </li>
  <li> A module's output port may connect to the input ports of one or more modules. 
  </li>
</ul>
<P>

<H2><A NAME="SECTION00054000000000000000">&#160;</A>
<A NAME="sec:setmodprops">&#160;</A>
<BR>
4.4 Setting Module Properties
</H2>

<P> To change a module's properties click its <B>UI</B> button. This will display 
  the module's control dialog which will change the module's properties. Each 
  module's reference documentation explains the use of its control dialog. Figure&nbsp;<A HREF="node5.html#fig:moddialog">4</A> 
  shows the control dialog for the <TT>Show Field</TT>. 
<P>

<H2><A NAME="SECTION00055000000000000000">&#160;</A>
<A NAME="sec:executenet">&#160;</A>
<BR>
4.5 Executing a Network
</H2>

<P> <i>Network Execution</i>' means that one or more modules must be executed 
  in coordination with one another. <em>SCIRun</em>'s <em>scheduler</em> manages 
  the coordination and execution of modules.
<P>

<H3><A NAME="SECTION00055100000000000000">
4.5.1 The Basics</A>
</H3>

<P> The Scheduler is activated when an event occurs to <EM>trigger</EM> a module's 
  execution. The scheduler creates a list of all modules that must executed in 
  coordination with the triggered module. U<i>pstream</i> and <i>downstream</i> 
  modules (directly or indirectly)will be placed on the execution list if they 
  have not previously executed. The scheduler will determine which modules must 
  be executed, and execute them. 
<P> Network execution is mostly transparent. The events that trigger module execution 
  will usually be generated automatically (<EM>e.g.,</EM>by changing a module's 
  property). At times, the user must manually generate a triggering event by choosing 
  the <B>Execute</B> item from a module's pop-up menu. 
<P>

<H3><A NAME="SECTION00055200000000000000">
4.5.2 Details</A>
</H3>

<P> Each module executes in its own thread and blocks (waits) until its upstream 
  modules can supply it with data. After a module complets its computation it 
  sends its results to its downstream modules. This completes a module's execution 
  cycle. Its next chance to receive data from its input ports and send data to 
  its output ports won't arise until some event causes it to be put on the scheduler's 
  execution list again. This behavior prevents modules from iterating, sending 
  intermediate results to their downstream modules. Downstream modules can't receive 
  these results until they occur in their execution cycle. They must be executed 
  each time the upstream module posts an intermediate result. 
<P>

<H3><A NAME="SECTION00055300000000000000">
4.5.3 Intermediate Results</A>
</H3>

<P> Some modules are designed to be used as an iteratiion. They send data to their 
  output ports by way of a method called <TT>send_intermediate</TT> which sends 
  the results of each iteration. When this method is used, the scheduler (re)executes 
  downstream modules each time the upstream module posts its next result. Downstream 
  modules are, therefore, able to receive the results of each iteration as soon 
  as the upstream module sends them. 
<P> Currently module <TT>SolveMatrix</TT> (from the <EM>SCIRun</EM> package and 
  <TT>Math</TT> category) is the only module that iterates by using the <TT>send_intermediate</TT> 
  method. 
<P>

<H3><A NAME="SECTION00055400000000000000">
4.5.4 Feedback Loops</A>
</H3>

<P> Some modules are designed to be used in feedback loops (and in fact, they 
  can only be used this way). Their output ports may be connected directly or 
  indirectly to their input ports. These modules also use the <TT>send_intermediate</TT> 
  method. 
<P>
The list of feedback modules is <TT>DipoleSearch</TT> and
<TT>ConductivitySearch</TT> from the <TT>Inverse</TT> category of the
<TT>BioPSE</TT> package and <TT>BuildLeadField</TT> from the
<TT>LeadField</TT> category of the <TT>BioPSE</TT> package.

<P>

<H2><A NAME="SECTION00056000000000000000">&#160;</A>
<A NAME="sec:deleteconnections">&#160;</A>
<BR>
4.6 Deleting a Connection
</H2>

<P> Delete a connection by pressing button three while the pointer is over a connection. 
<P>

<H2><A NAME="SECTION00057000000000000000">&#160;</A>
<A NAME="sec:selectmods">&#160;</A>
<BR>
4.7 Selecting Modules
</H2>

<P> A few operations (see <A HREF="node5.html#sec:movemod"><EM>Moving Module(s)</EM></A> 
  and <A HREF="node5.html#sec:destroymod"><EM>Destroying Module(s)</EM></A>) act 
  on a group of modules. There are two ways to create a group of modules. 
<P> 
<DL COMPACT> 
  <dl> 
    <dl> 
      <dt>1.Click mouse button two while the pointer is in the network pane, but 
        not over a module or a connection. Then drag the mouse to draw a box outline. 
        Modules intersecting the box will be part of the group. Release button 
        two to complete the selection. </dt>
      <dd>&nbsp;</dd>
      <dt>2. Select the first module by clicking mouse button two while the pointer 
        is over a module. Then add modules to the group by pressing, and holding 
        down, the <TT>control</TT> key while clicking on modules with button two. 
      </dt>
    </dl>
  </dl>
</DL>
<P> Modules selected will appear in a slightly darker shade of grey. 
<P> Selection methods may be mixed--add modules to the group by pressing the control 
  key, and making selections (using the above methods). Without pressing the control 
  key, the previous group will be forgotten and a new one will be created. 
<P>

<H2><A NAME="SECTION00058000000000000000">&#160;</A>
<A NAME="sec:movemod">&#160;</A>
<BR>
  4.8 Moving Modules</H2>

<P> Modules may be moved around in the network pane by clicking button one while 
  the pointer is over a module, dragging the module to its new location. 
<P> Multiple modules may be moved at one time. To do this first <A HREF="node5.html#sec:selectmods">select</A> 
  one or more modules. Then, click button one while the pointer covers any one 
  of the modules in the group, dragging the modules to their new location. 
<P>

<H2><A NAME="SECTION00059000000000000000">&#160;</A>
<A NAME="sec:destroymod">&#160;</A>
<BR>
  4.9 Destroying Modules</H2>

<P>
Delete a module by selecting the <B>Destroy</B> menu item from the
module's pop-up menu.

<P> Multiple modules may be deleted at one time. To do this first <A HREF="node5.html#sec:selectmods">select</A> 
  one or more modules. Then choose from the pop-up menu of any one of the modules 
  in the selected group, the <B>Destroy Selected</B> item. 
<P>

<H2><A NAME="SECTION000510000000000000000">&#160;</A>
<A NAME="sec:docmodule">&#160;</A>
<BR>
4.10 Documenting a Module
</H2>

<P> It is often useful to document the purpose of a module within a network. Each 
  module maintains a notepad for this purpose which may be edited by selecting 
  the <B> Notes</B> item from the module's pop-up menu. This simple editor allows 
  the user to write notes or otherwise document the module within the context 
  of its network. 
<P>

<H2><A NAME="SECTION000511000000000000000">&#160;</A>
<A NAME="sec:viewmodslog">&#160;</A>
<BR>
4.11 Viewing a Module's Log
</H2>

<P> Each module supports a message log and may write error messages or other types 
  of messages. To view this log, select the <B>Show Log</B> item from the module's 
  pop-up menu. 
<P>

<H2><A NAME="SECTION000512000000000000000">&#160;</A>
<A NAME="sec:docnetwork">&#160;</A>
<BR>
4.12 Documenting a Network
</H2>

<P> It is useful to document the purpose of a networkby using a network's notepad. 
  To edit the network's notepad select the <B>Add Info</B> item from the main 
  window's <B>File</B> menu. This simple editor allows the user to write notes 
  or otherwise document the purpose and use of the network. 
<P>

<H2><A NAME="SECTION000513000000000000000">&#160;</A>
<A NAME="sec:savenet">&#160;</A>
<BR>
4.13 Saving a Network
</H2>

<P> <EM>SCIRun</EM> can save networks to files. Network files have an extension 
  of <TT>.net</TT> (although, in the past, they also had .sr and .uin extensions). 
<P> To save a network select the <B>Save</B> item from the main window's <B>File</B> 
  menu. A file browser dialog will prompt you for the name and location of the 
  network file. 
<P> Network files are actually <EM>Tool Command Language</EM> (TCL) scripts and 
  may be edited, though beyond the scope of this guide. 
<H2><A NAME="SECTION000514000000000000000">&#160;</A>
<A NAME="sec:opennet">&#160;</A>
<BR>
4.14 Opening a Network
</H2>

<P> To open a network file, select the <B>Open</B> item from the main window's 
  <B>File</B> menu. A file browser dialog will prompt you for the name and location 
  of the network file. 
<P> Note that opening a network file merges the network file with the network 
  pane. There is currently no way to &quot;close'' a network and open a new one-- 
  you must quit and restart <EM>SCIRun</EM>.
<P>

<H2><A NAME="SECTION000515000000000000000">&#160;</A>
<A NAME="sec:navnetwork">&#160;</A>
<BR>
4.15 Navigating a Network
</H2>

<P> A complex network may not be entirely visible in the network pane, but the 
  network pane's scroll bars bring other parts of a network into view. The navigation 
  tool will also display complex networks. 
<P> The navigation pane shows the entire &quot;network world.'' The network navigation 
  tool is the small rectangular region (outlined in black) within the navigation 
  pane, and window to the network world. The position of the navigation tool determines 
  the visibility of the network in the network pane. To view other parts of the 
  network, press button one while the pointer is anywhere in the navigation pane--this 
  will move the tool to the location of the pointer, dragging it to the new location. 
<P>

<H2><A NAME="SECTION000516000000000000000">&#160;</A>
<A NAME="sec:termapp">&#160;</A>
<BR>
4.16 The <EM>SCIRun</EM> Shell
</H2>

<P> After starting, <EM>SCIRun</EM> will run a shell-like application in the terminal 
  window called the <EM><EM>SCIRun</EM> shell</EM>, which displays the prompt 
  <TT>scirun&gt;</TT> in the terminal window. This program is a <EM>Tool Command 
  Language</EM> (TCL) shell program that has been extended with <EM>SCIRun</EM> 
  specific commands. 
<P> It is possible to type TCL <EM>SCIRun</EM> commands at the prompt. For instance, 
  to load a network file, type <TT>source <I>&lt;network file name&gt;</I></TT>. 
  This has the same effect as the <B>File</B> menu's <B>Open</B> command. 
<P>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html162"
 HREF="node6.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html158"
 HREF="usersguide.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html152"
 HREF="node4.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html160"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A> 
<A NAME="tex2html161"
 HREF="node9.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html163"
 HREF="node6.html">5. Visualization with the</A>
<B> Up:</B> <A NAME="tex2html159"
 HREF="usersguide.html">No Title</A>
<B> Previous:</B> <A NAME="tex2html153"
 HREF="node4.html">3. Starting SCIRun</A>
<!--End of Navigation Panel-->
<ADDRESS>
<I>Rob MacLeod</I>
<BR><I>2001-05-30</I>
</ADDRESS>
</BODY>
</HTML>
