<html>



	<head>

		<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">

		<meta name="generator" content="Adobe GoLive 4">

		<title>Derived Fields</title>

	</head>



	<body bgcolor="#a9a9a9">

		<table align="center" border="0" cellpadding="0" cellspacing="0" width="306" bgcolor="#cccccc">

			<tr>

				<td><img height="91" width="600" src="images/sub-banner.jpg" border="0" usemap="#sub-banner8662a0c4"><map name="sub-banner8662a0c4"><area href="chapter_8.html" coords="580,65,597,84" shape="rect" title="Another View"><area href="chapter_7.html" coords="557,64,575,83" shape="rect" title="Feedback"><area href="chapter_6.html" coords="532,64,550,82" shape="rect" title="Putting Simulation and Visualization Together"><area href="chapter_5.html" coords="508,64,527,83" shape="rect" title="Bioelectric Field Simulation"><area href="chapter_4.html" coords="483,64,502,83" shape="rect" title="Multi-Vis"><area href="chapter_3.html" coords="460,64,478,83" shape="rect" title="Derived Fields"><area href="chapter_2.html" coords="436,64,454,83" shape="rect" title="Looking at the Data"><area href="chapter_1.html" coords="412,65,430,82" shape="rect" title="Geometry Visualization"><area href="Intro.html" coords="354,64,406,84" shape="rect" title="Introduction"><area href="http://software.sci.utah.edu/doc/index.html" coords="205,63,343,83" shape="rect" title="Documentation"><area href="http://software.sci.utah.edu/" coords="103,63,195,82" shape="rect" title="Software"><area href="index.html" coords="1,65,92,81" shape="rect" title="Tutorial Home"></map></td>

			</tr>

			<tr>

				<td>

					<center>

						<table border="0" cellpadding="0" cellspacing="5" width="600">

							<tr>

								<td>

									<center>

										<br>

										<font size="4" face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular" color="maroon"><b>Chapter 3: Derived Fields<br>

										<hr>

										</b></font></center>

									
              <div align="left"> 
                <p>&lt;subhead:Chapter overview&gt;<br>

                <p>In Chapters 1 and 2 we constructed SCIRun networks
                to visualize the geometry and data values in a Field.
                In this Chapter we will explore some more
                visualization techniques, and will look at
                &quot;filter&quot; modules that take in a Field and
                produce a new derived Field as output.  Rather than
                building one net to introduce all of these new
                modules, we will construct several nets, with each
                describing a single algorithm.  To keep things simple,
                we will divide this chapter into three sections,
                one for each method.
                
                <p>&lt;section:3A - SampleField&gt;<br>

		<p>Given a large Field of data, it is often useful to
                sample a subset of the Field in order to make the
                visualization manageable and to avoid visual clutter.
                One example of this is to examine a cutting plane
                inside of a three-dimensional dataset.  A similar
                technique is to examine a cutting volume.
                  
		<p>In SCIRun, the functionality described above is
                split into two steps.  The first step is to generate a
                set of samples points; the second is to interpolate
                the datavalues from the original Field onto those new
                sample points.  In this section we will describe
                some of our sample generation modules.  In the next
                section we will talk about data interpolation.
                  
                <p>To generate a cutting plane, we use a
                SCIRun/Fields/SamplePlane module.  This module takes
                a Field as input, and sends a Field as output.  The
                input Field is only used to specify the geometric
                bounds for the samples.  The SamplePlane module
                generates a set of regularly spaced samples on a Plane
                (an ImageField) that can be chosen to line up with the
                X, Y, or Z axis.  The user specifies the orientation,
                as well as the number of samples via the module's UI.
                  
                <p>An example of using this module is shown in Figure
                xx.  We have created a FieldReader module and a
                SamplePlane module, and have hooked them together.
                For this example, we will again use the
                utahtorso-lowres-voltage.tvd.fld as our input file.
                The output of SamplePlane is a Field that contains
                geometry (an ImageMesh), but no meaningful data yet.
                We can visualize its geometry, though, using a
                ShowField module and a Viewer module.

                <p>SampleField generates samples from any type of
                input field and outputs the samples as a PointCloud
                field.  The samples can be generated randomly or user
                selected via a 3D widget.  The random sampling can be
                weighted by importance (determined by the data value
                of the sample) or left unweighted.  The random
                sampling can also be limited to the selection of node
                points, rather than points from the interior of the
                fields elements, by clamping the samples to nodes.
                The &quot;uniform&quot; distributions are a uniformly
                random function over the spacial extents of the field
                (i.e.  the elements are weighted by their volume or
                area), whereas the &quot;scattered&quot; distributions
                are a uniformly random function over the elements only
                (i.e.  all elements have the same weight).  The
                &quot;importance weighted&quot; distributions multiply
                the existing weight of a sample by the interpolated
                data value associated with it, while the &quot;not
                weighted&quot; distributions leave the existing weight
                of a sample unchanged.

                <p>&lt;section:3B - DirectInterpolate&gt;<br>

                <p>In the previous sub-section, we generated sample
                distributions based on an input Field.  In this
                section, we will use the DirectInterpolate module to
                interpolate datavalues onto that geometry.  We begin
                by creating a FieldReader and a SamplePlane module, as
                described above.  To map datavalues onto the plane, we
                use the DirectInterpolate module.  To the first input
                port we attach the datavalues source, in this case the
                output from the FieldReader.  To the second input port
                we attach the destination field, in this case the
                output from SamplePlane.  The DirectInterpolate module
                uses linear interpolation to compute new values.
                  
                <p>Having computed the values on the plane, we can now
                visualize the plane with color-mapped geometry.  To do
                this, we hook up the modules just as we did in Chapter
                2.  The net you are using should look like the one in
                Figure xx, and the image in the ViewWindow should look
                like the image in Figure xx.  DirectInterpolate
                generates a new field that contains the geometry of
                the destination field, but with all of the data values
                linearly interpolated from the source field.  It
                should work correctly with all of the current field
                and data types.  The data will be stored at the
                elements specified in the destination field.

                <p>&lt;section:3C - Streamlines network&gt;<br>

                <p>The last visualization module we will introduce in
                this Chapter will be the StreamLines module.  This
                module takes in a VectorField, and a Field of sample
                points (as might have been generated using for example
                a Rake), and outputs a new Field consisting of a
                sequence of advected path-integral positions generated
                from integrating the sample positions through the
                (derivative) VectorField.  In the example Datasets
                directories, we do not have any

                <p>To use this module, we connect the field we would
                like to sample to the input port on top of the module.
                The sample points come out at the bottom and in this
                case are connected to the StreamLines module as the
                seed points for the streamlines.  If the widget is to
                be used to generate the sample points, it's port is
                connected to the Viewer as well.
                  
                <p>The field we are interested in interpolating from
                is connected to the Source port on the top left of the
                module.  The new field that we wish to fill in with
                values from the source field is connected to the
                Destination port on the top right of the module.

              </div>

								</td>

							</tr>

						</table>

					</center>

				</td>

			</tr>

			<tr>

				<td><img height="35" width="600" src="images/sub-banner-bottom.jpg" border="0" usemap="#sub-banner-bottom8ac341b7"><map name="sub-banner-bottom8ac341b7"><area href="chapter_4.html" coords="563,1,590,21" shape="rect"><area href="chapter_2.html" coords="533,1,561,21" shape="rect"><area href="http://www.sci.utah.edu" coords="6,6,67,31" shape="rect"></map></td>

			</tr>

		</table>

	</body>



</html>

