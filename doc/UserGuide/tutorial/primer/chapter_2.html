<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
<meta name="generator" content="Adobe GoLive 4">
<title>Looking at the Data</title>
</head>

<body bgcolor="#a9a9a9">
<table align="center" border="0" cellpadding="0" cellspacing="0" width="306" bgcolor="#cccccc">
<tr>
<td><img height="92" width="600" src="images/sub-banner.jpg" border="0" usemap="#sub-banner8662a0c4"><map name="sub-banner8662a0c4"><area coords="581,65,598,84" shape="rect" title nohref><area href="chapter_7.html" coords="557,64,575,83" shape="rect" title="Feedback"><area href="chapter_6.html" coords="532,64,550,82" shape="rect" title="Putting Simulation and Visualization Together"><area href="chapter_5.html" coords="508,64,527,83" shape="rect" title="Bioelectric Field Simulation"><area href="chapter_4.html" coords="483,64,502,83" shape="rect" title="Multi-Vis"><area href="chapter_3.html" coords="460,64,478,83" shape="rect" title="Derived Fields"><area href="chapter_2.html" coords="436,64,454,83" shape="rect" title="Looking at the Data"><area href="chapter_1.html" coords="412,64,430,81" shape="rect" title="Geometry Visualization"><area href="Intro.html" coords="354,64,406,84" shape="rect" title="Introduction"><area href="http://software.sci.utah.edu/doc/index.html" coords="205,63,343,83" shape="rect" title="Documentation"><area href="http://software.sci.utah.edu/" coords="103,63,195,82" shape="rect" title="Software"><area href="index.html" coords="1,65,92,81" shape="rect" title="Tutorial Home"></map></td>
</tr>

<tr>
<td>
<center>
<table border="0" cellpadding="0" cellspacing="5" width="600">
        <tr>
	<td>
	<center>
	<br>
	<font size="4"
	face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular"
	color="maroon">
	<b>Chapter 2: Looking at the Data</b></font> </p>
        <p>&nbsp; </p>
        </center>
        <div align="left">

        <p><b>Chapter Overview</b><br>

        <p>In Chapter 1, we constructed a small network to visualize
        the geometry of a mesh.  In this chapter, we will extend that
        net, adding tools to look at data values on the geometry.
        Specifically, we will visualize a scalar quantity (voltage) on
        a set of points in space (a PointCloud of electrodes).
                  
        <p>From our previous net, we hooked three modules
	together--FieldReader, ShowField, and Viewer--as shown in
	Figure 1.1.  On the user interface of the ShowField module, we
	used the Default Color selector to make all of the geometry
	render blue.  In this chapter, rather than mapping a single
	color to all of the geometry, we vary the colors over the
	geometry based on the scalar values in the Field.  For a more
	complete description of how Fields map data values to
	geometry, click here [link].
                  
        <p><b>Colormaps</b><br>

        <p>The datavalues are mapped to the geometric mesh, and we
        also need to map from datavalue to color.  The ColorMap class
        in SCIRun provides this mapping.  The ColorMap also contains a
        set of evenly spaced colors (RGBA),a minimum and maximum
        datavalue range to which each color range corresponds.
        Several example colormaps are shown in <b>Figure 2.1</b>.

	</div>
	<center>
	<p><img height="200" width="450" src="images/figures/2_1.jpg"><br>
	<b>Figure 2.1</b></p>
	</center>
	<div align="left">
	<p><br>
                  
        <p>The GenStandardColorMaps module generates colormaps in
	SCIRun. This module contains a selection of default colormaps.
	For each of the colormaps, the user can control the opacity
	(also known as alpha) for each datavalue, and can choose the
	number of discrete entries in the colormap table.
                  
        <p>The minimum/maximum range of the ColorMap determines what
        values in the data are assigned what colors.  By default the
        minimum/maximum range is from 0 to 1.  Using the
        RescaleColorMap module, the user can set the min/max values by
        hand, or can &quot;auto-scale&quot; them to correspond with
        the min/max datavalue range from a scalar Field.
                  
        <p>Now we can add a GenStandardColorMaps and a RescaleColorMap
        module to our net from Chapter 1.  Both of these modules are
        located under the SCIRun/Visualization menu.  Connect the
        output from GenStandardColorMaps to the input of
        RescaleColorMap, connect the output from the FieldReader to
        the other input port of RescaleColorMap.  Finally, connect the
        output from RescaleColorMap to the input of ShowField.  Your
        network should now look like <b>Figure 2.2.</b>

	</div>
	<center>
	<p><img height="416" width="300" src="images/figures/2_2.gif"><br>
	<b>Figure 2.2</b></p>
	</center>
	<div align="left">
	<p><br>

	<p>Note that when the connection was created between
	FieldReader and ResaleColorMap, the ResaleColorMap module
	added another input Field port.  This last &quot;dynamic&quot;
	port is just like the one in the Viewer module.  In this case,
	if the user connects more than one Field into RescaleColorMap,
	the min/max range for auto-scaling will correspond to the
	min/max range of datavalues from all of the input Fields.
                  
        <p>All that remains for this net to be complete is to read in
        a Field.  Use the FieldReader User Interface (UI) to read in
        utahtorso-lowres-electrodes.pcd.fld--a point cloud of
        electrode positions, with voltages measured from a single
        instant in time.  After reading in the data, you should see an
        image like <b>Figure 2.3</b> in the ViewWindow.

	</div>
	<center>
	<p><img height="451" width="450" src="images/figures/2_3.gif"><br>
	<b>Figure 2.3</b></p>
	</center>
	<div align="left">
	<p><br>
                  
        <p><b>Module user interfaces</b><br>

        <p>Now we'll explore the User Interfaces for these two
        modules.  Opening the UI for GenStandardColorMaps, you will
        see a window like <b>Figure 2.4.</b>

	</div>
	<center>
	<p><img height="369" width="300" src="images/figures/2_4.jpg"><br>
	<b>Figure 2.4</b></p>
	</center>
	<div align="left">
	<p><br>

        <p>On the left, we have a collection of standard maps we can
        choose from.  At the top, we see the selected ColorMaps, and
        have a clickable interface for changing the opacity of each
        color swatch in the map.  Under the rendered ColorMap, we have
        two more interface features: a gamma value for non-linear
        compression or expandsion of the otherwise-linear color ramp,
        and a Resolution slider for setting the number of distinct
        colors that will be stored in the color table.  By choosing a
        low resolution, we can generate &quot;banded&quot;
        visualizations; by choosing a higher resolution, we can
        generate smoother color transitions.
                  
        <p><b>Figure 2.5</b> shows the UI to the ResaleColorMap module.

	</div>
	<center>
	<p><img height="114" width="398" src="images/figures/2_5.gif"><br>
	<b>Figure 2.5</b></p>
	</center>
	<div align="left">
	<p><br>

	<p>The user can choose whether to set the min/max range of the
        ColorMap manually or automatically.  As mentioned above, if
        the range is auto-scaled, it will correspond to the minimum
        and maximum datavalues from all of the input Fields that
        connect to the module.
                  
        <p>By changing the ColorMap, in GenStandardColorMaps, from
        Inverse Rainbow to Inverse Darkhue, we change the image in the
        ViewWindow from <b>Figure 2.3</b> to <b>Figure 2.6.</b>
        Changing the ColorMap range to a manual setting of -30 to 30,
        we are able to &quot;clamp&quot; the range of colors, as seen
        in <b>Figure 2.7.</b>

	</div>
	<center>
	<p><img height="451" width="450" src="images/figures/2_6.gif"><br>
	<b>Figure 2.6</b></p>
	</center>
	<div align="left">
	<p><br>
	</div>
	<center>
	<p><img height="451" width="450" src="images/figures/2_7.gif"><br>
	<b>Figure 2.7</b></p>
	</center>
	<div align="left">
	<p><br>

        <p>The second input port on the ShowField module accepts a
        ColorMap.  If this port is connected when ShowField executes,
        it maps the data values in its input Field to a color in the
        input ColorMap, and renders accordingly.  If a ColorMap is
        present in ShowField the, the module ignores the default
        color, and uses ColorMap value.<br>

	<br>
	<br>
        </div>
	</td>
	</tr>
</table>
</center>
</td>
</tr>
<tr>
<td><img height="35" width="600" src="images/sub-banner-bottom.jpg" border="0" usemap="#sub-banner-bottom8ac200bf"><map name="sub-banner-bottom8ac200bf"><area href="chapter_3.html" coords="564,3,588,18" shape="rect"><area href="chapter_1.html" coords="539,1,560,22" shape="rect"><area href="http://www.sci.utah.edu" coords="6,6,68,30" shape="rect" title="SCI Institute"></map></td>
</tr>
</table>
</body>
</html>
