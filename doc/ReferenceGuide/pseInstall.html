<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
 <meta name="Author" content="Erik Jorgensen">
 <link rel=stylesheet type="text/css" href="http://www.sci.utah.edu/scirun_docs/doc/doc_styles.css">
 <title>SCIRun inst and build instructions - Unix version</title>
</head>

<body>
<a href="http://www.sci.utah.edu"><img style="margin-left:-2em"
src="http://www.sci.utah.edu/images/SCI_logo.gif" border="0" hspace="10" height="66" width="150"></a>

<p class="title">Installation and Build Instructions for the SCIRun PSE</p>
<p class="subtitle">(Unix version - Updated February 13, 2001)</p>

<p class="head">Table of contents</p>
<ol class="toc">
      <LI><A HREF="#Prerequisites">Prerequisites</A></LI>
      <LI><A HREF="#Requirements">System Software Requirements</A></LI>
      <LI><A HREF="#Recommend">System Recommendations</A></LI>
      <LI><A HREF="#Installing">Installing SCIRun</A></LI>
      <LI><A HREF="#Building">Building SCIRun</A></LI>
      <LI><A HREF="#RunningSCIRun">Running SCIRun</A></LI>
      <LI><A HREF="#AdditionalDocs">Additional Documentation</A></LI>
      <LI><A HREF="#GettingHelp">Getting Help</A></LI>
      <LI><A HREF="#ThirdParty">Third Party Software Information</A></LI>
	  <LI><A HREF="#Gotchas">Known Issues</A></LI>
</ol>

<p class="head"><a name="Prerequisites">Prerequisites</a></p>
    <p class="firstpara">
      Use of this document requires experience with the SGI
      Irix operating system and/or the Linux operating system.
      Knowledge of file systems, programming in C/C++, building
      software from tarball distributions and shell scripting will
      be useful if not required.  The installation or upgrade of
      core system components (such as the OS and compilers) may be
      required.  As such, a system administrator's assistance may
      be warranted.
    </p>

<p class="head"><a name="Requirements">System Software Requirements</a></p>
    <p class="firstpara">
      At the moment only two platforms are officially supported: SGI
      and Linux.
    </p>

    <p class="firstpara">
      The following table describes the system software
      requirements for SCIRun.  The version numbers listed
      in the table are minimums; newer and/or older versions may
	  also work, but are not officially supported.
    </p>

    <p class="firstpara">
      Click on the links in the
      table to get information about (software column) or to download
      (version column) the software.
    </p>

    <p class="firstpara">
      Refer to the <a href="#ThirdParty">Third Party Software
      Information</a> section for information on installing the
      required software.
    </p>

    <p><center>
    <TABLE border=1>
      <TR>
        <TH>Platform</TH>
	<TH>Software</TH>
	<TH>Version</TH>
      </TR>

      <TR>
        <TD rowspan=2>SGI</TD>
	<TD> 
	  <A HREF=http://www.sgi.com/developers/technology/irix.html>
	    Irix
	  </A>
	</TD>
	<TD>6.5</TD>
      </TR>
      
      <TR>
        <TD>
          <A HREF="http://www.sgi.com/developers/devtools/languages/mipspro.html">
            MIPSpro compilers
          </A>
        </TD>
        <TD> 7.3.1.1m </TD>
      </TR>

      <TR>
        <TD rowspan=2>Linux</TD>
	<TD>
	  <A HREF="http://www.kernel.org">
            Kernel
	  </A> 
        </TD>
        <TD>
          <A HREF=http://www.kernel.org/pub/linux/kernel/v2.2/linux-2.2.14.tar.gz>
            2.2.14
          </A>
        </TD>
      </TR>

      <TR>
        <TD> 
          <A HREF="http://www.gnu.org/software/gcc/gcc.html">
            GCC
          </A>
        </TD>
        <TD> 
          <A HREF="ftp://gcc.gnu.org/pub/gcc/releases/gcc-2.95.2/gcc-2.95.2.tar.gz">
            2.95.2
          </A>
        </TD>
      </TR>

      <TR>
        <TD rowspan=6> SGI and Linux </TD>
        <TD>
          <A HREF=http://dev.scriptics.com/software/tcltk/8.3.html>
            Tcl
          </A>
        </TD>
        <TD>
          <A HREF=http://dev.scriptics.com/download/tcl/tcl8_3/tcl8.3.2.tar.gz>
            8.3.2
          </A>
        </TD>
      </TR>

      <TR>
        <TD>
          <A HREF=http://dev.scriptics.com/software/tcltk/8.3.html>
            Tk
          </A>
        </TD>
        <TD>
          <A HREF=http://dev.scriptics.com/download/tcl/tcl8_3/tk8.3.2.tar.gz>
            8.3.2
          </A>
        </TD>
      </TR>

      <TR>
        <TD>
          <A HREF=http://www.tcltk.com/itcl>
            [incr Tcl/Tk]
          </A>
        </TD>
        <TD>
          <A HREF=http://dev.scriptics.com/ftp/itcl/itcl3.1.0.tar.gz>
            3.1.0
          </A>
        </TD>
      </TR>

      <TR>
        <TD>
          <A HREF="http://www.tcltk.com/blt">
            BLT
          </A>
        </TD>
        <TD>
          <A HREF="ftp://tcltk.sourceforge.net/pub/tcltk/blt/BLT2.4u.tar.gz">
            2.4u
          </A>
        </TD>
      </TR>

      <TR>
        <TD>
          <A HREF="http://www.gnu.org/software/make/make.html">
            GNU make
          </A>
        </TD>
        <TD>
          <A HREF="ftp://ftp.gnu.org/gnu/make/make-3.79.1.tar.gz">
            3.79.1
          </A>
        </TD>
      </TR>

      <TR>
        <TD>
          <A HREF="http://xml.apache.org/xerces-c/index.html">
            Xerces-C
          </A>
        </TD>
        <TD>
          <A HREF=http://xml.apache.org/dist/xerces-c/stable/xerces-c-src1_3_0.tar.gz>
            1.3.0
          </A>
        </TD>
      </TR>
    </TABLE>
    </center>
    </p>

<p class="head"><a name="Recommend">System Recommendations</a></p>
    <p class="firstpara">
      <b>For SGI machines:</b>
      R10K 250MHz processor(s),
      Texture mapping hardware.
    </p>


    <p class="firstpara">
      <b>For Linux machines:</b>
        PIII 500MHz processor(s),
	NVIDIA Geforce or Quadro series accelerated graphics card with 0-9.6 drivers,
	Mandrake 7.2 and XFree86 4.0.2.
    </p>

<p class="head"><a name="Installing">Installing SCIRun</a></p>
    <p class="firstpara">
      <b>1) Choose a mechanism for obtaining the SCIRun source tree.</b>
    </p>

    <p class="firstpara">
      If you have access to the SCIRun CVS repository (i.e. you are
      a student or staff member of the SCI Institute), then contact a
	  member of the senior staff for information regarding CVS access.
    </p>

    <p class="firstpara">
      Otherwise, you will have to get a tarball distribution file from
      the SCI Institute under a non-disclosure agreement (NDA).
      Please contact the institute's assistant director <a
      href=mailto:gjones@cs.utah.edu>Greg Jones</a> for 
      information about signing an NDA to acquire the SCIRun PSE
      software.
    </p>

    <p class="firstpara">
      Note: an open source software license is in the
      works and will be available soon.
    </p>

    <p class="firstpara">
      <b>2) Choose an install directory for the root of the SCIRun source
      tree.</b>
    </p>
      
    <p class="firstpara">
      Change directories to the chosen directory.  Depending on how
      SCIRun will be obtained, either a) unzip and
      untar the SCIRun source tree, or b) checkout the SCIRun source
      tree from the CVS repository.
    </p>

    <p class="firstpara">
      There is no "make install" step in the build process, so
      where ever SCIRun is untared or checked-out to is where SCIRun will be
      installed.
    </p>

    <p class="firstpara">
      The following are example installation transcripts:
    </p>

    <p class="firstpara">
      For tarball:
    </p>

    <pre class="example"><font color=blue>cd /home/bob
gunzip SCIRun.tar.gz
tar xvf SCIRun.tar
		</font>
    </pre>

    <p class="firstpara">
      For CVS:
    </p>
    
    <pre class="example"><font color=blue>cd /home/bob
cvs checkout SCIRun
		</font>
    </pre>

    <p class="firstpara"> 
      The root of the resulting SCIRun source tree will be referred to 
      as <i><b><font color=green>SCIRUN_TOP</font></b></i> from now on.
      The <i><b><font color=green>SCIRUN_TOP</font></b></i> for the above
      examples would be "/home/bob/SCIRun" .
    </p>

    <p class="firstpara">
      The rest of the instructions apply to SCIRun trees acquired using
      both the tarball and CVS mechanisms.
    </p>

<p class="head"><a name="Building">Building SCIRun</a></p>
  <p class="firstpara">
    <b>1) Make sure that the system setup matches the 
    <A HREF="#Requirements">system requirements</A>.</b>
  </p>

  <p class="firstpara">
    See <a href="#ThirdParty">Third Party Software Information</a>
    on installing and building the required third party
    software.
  </p>

  <p class="firstpara">
    <b>2) Run configure.</b>
  </p>

  <p class="firstpara">
    From the <i><b><font color=green>SCIRUN_TOP</font></b></i>/src
    directory type:
  </p>

  <pre class="example"><font color=blue>configure</font> <i><b><font color=green>CONFIGURE_OPTIONS</font></b></i></pre>

  <p class="firstpara">
    Where <i><b><font color=green>CONFIGURE_OPTIONS</font></b></i> are one or more of 
    <a href="makefiles.html#configure">these</a>.<br><br>
    An example of a typical configure command:
  </p>

  <pre class="example"><font color=blue>configure --enable-package="Uintah BioPSE" \
	  --with-tcl=/usr/local/scirun_stuff \
	  --with-xerces=/usr/local/scirun_stuff
	</font>
  </pre>

  <p class="firstpara">	
    The example assumes that the indicated third party software 
    was installed in /usr/local/scirun_stuff.
  </p>

  <p class="firstpara">   
    <b>3) Run GNU make.</b>
  </p>

  <p class="firstpara">
    From the <i><b><font color=green>SCIRUN_TOP</font></b></i>/src
    directory type:
  </p>

  <pre class="example"><font color=blue>make</font></pre>

<p class="head"><a name="RunningSCIRun">Running SCIRun</a></p>
    <P class="firstpara">
      After a successful build, there will be an executable in
      the <i><b><font color=green>SCIRUN_TOP</font></b></i>/src directory named:
    </P>

    <pre class="example"><font color=blue>scirun</font>
    </pre>

    <p class="firstpara">
      Running this will open the SCIRun network editor window and start
      a console (called the SCIRun console) in the shell where scirun was
      started from.
    </p>   

    <p class="firstpara">
      If the window does not appear, note any errors
      displayed in the SCIRun console and see the getting
      help section below.  Of course, it might just be
      hiding behind other windows on the desktop!
    </p>


<p class="head"><a name="AdditionalDocs">Additional Documentation</a></p>
    <p class="firstpara">
      Additional Documentation about SCIRun can be obtained on
      the web at:
    </p>

    <pre class="example"><A HREF="http://www.sci.utah.edu/scirun_docs/doc">
http://www.cs.utah.edu/scirun_docs/doc</A>
    </pre>


<p class="head"><a name="GettingHelp">Getting Help</a></p>
    <p class="firstpara">
      There is a mailing list available for asking questions about
      using SCIRun or to get help with resolving a problem.  To subscribe to
      the mailing list, send email to:
    </p>

    <p class="firstpara">
      <A HREF="mailto:majordomo@cs.utah.edu"><pre class="example">majordomo@cs.utah.edu</pre></A>
    </p>

    <p class="firstpara">
      with the following in the body of the message:
    </p>

    <pre class="example"><font color=blue>subscribe scirun-users</font>
    </pre>

    <p class="firstpara">
      To use the mailing list, simply send your question or problem
      as an email to the list:
    </p>

    <P class="firstpara">
      <A HREF="mailto:scirun-users@cs.utah.edu"><pre class="example">scirun-users@cs.utah.edu</pre></A>
    </P>

    <P class="firstpara">
      To aid in problem resolution, include a verbatim copy of the error(s) 
      displayed (if any).  Also include a short description of what you
      we're doing (running a network, building the tree, etc.) and which
      version of SCIRun you have (SCIRun 1.0.0 alpha).
    </P>

<p class="head"><a name="ThirdParty">Third Party Software Information</a></p>
    <p class="firstpara">
      The following information may help expedite the process of
      installing the required third party software.  It is not
      intended to replace the installation instructions provided with
      the software, only to supplement them.  Please read the
      build instructions for each distribution before attempting to
      build.
    </p>

    <p class="firstpara">
      This section does not apply to the installation and upgrade of
      the OS and compilers, as those topics are quite involved.
    </p>

<p class="subhead">Installation Location of Third Party Software</p>
    <p class="firstpara">
      SCIRun can easily be used with existing instances of the
      required third party software, regardless of where it is
      installed.  However, it is recommended that all the
      required third party software be installed into a centralized and
	  out of the way location, to prevent conflicts with other software,
	  if it is not yet already installed.
    </p>
    
    <p class="firstpara">
      For example, install all the third party software into the
      directory called "/usr/local/scirun_stuff" such that
      after installing all the distributions, the /usr/local/scirun_stuff has the
      following contents:
    </p>

    <pre class="example">/usr/local/scirun_stuff/tcl8.3.2
/usr/local/scirun_stuff/tk8.3.2
/usr/local/scirun_stuff/itcl3.1.0
/usr/local/scirun_stuff/blt2.4u
/usr/local/scirun_stuff/xerces-c-src1_3_0
/usr/local/scirun_stuff/make-3.79.1
/usr/local/scirun_stuff/man
/usr/local/scirun_stuff/lib
/usr/local/scirun_stuff/bin
/usr/local/scirun_stuff/include
    </pre>

    <p class="firstpara">
      Where all the executable binaries are in the /bin directory, all
      the shared object binaries are in the /lib directory and all 
      the header files are in the /include directory.
    </p>
        
    <p class="subhead">Configure Options for Third Party Software</p>
      
    <p class="firstpara">
      The following represent the recommended configure
      commands for the indicated software distributions.
    </p>

    <p class="firstpara">
      NOTE: <i><b><font color=green>INST_DIR</font></b></i> represents
      the chosen installation directory for the indicated software
      distribution.  <i><b><font color=green>INST_DIR</font></b></i>
      would be "/usr/local/scirun_stuff" for the example given
      above. 
    </p>

    <p class="firstpara">
      <b>For Tcl, Tk, [incr Tcl/Tk], BLT and GNU make</b>
    </p>

    <pre class="example"><font color=blue>configure --prefix=</font><i><b><font
	  color=green>INST_DIR</font></b></i>
    </pre>

    <p class="firstpara">
      <b>For Xerces-C</b>
    </p>

    <p class="firstpara">
      On SGI machines:
    <p>
    <pre class="example"><font color=blue>runConfigure -nfileonly -tnative -minmem \
             -pirix -ccc -xCC -z-DAPP_NO_THREADS -P</font><i><b><font
		 color=green>INST_DIR</font></b></i>
    </pre>

    <p class="firstpara">
      On Linux machines:
    </p>
    <pre class="example"><font color=blue>runConfigure -nfileonly -tnative -minmem \
             -plinux -cgcc -xg++ -rpthreads -P</font><i><b><font
		 color=green>INST_DIR</font></b></i>
    </pre>

<p class="subhead">Environment Variables</p>
    <p class="firstpara">
      Once the third party software is properly installed, set or edit 
      environment variables to use those executables and libraries.
    </p>

    <p class="firstpara">
      Usually, depending on the startup shell being used, there are two
      environment variables that may need to be edited: one defining the
      search path for executables and the other defining the search path
      for libraries.  Edit (or set) those variables, for the shell being
      used, to include the third party executables located in the /bin
      directory(s) and to include the the third party libraries located
      in the /lib directory(s).
    </p>

    <p class="firstpara">
      As before, <i><b><font color=green>INST_DIR</font></b></i> represents
      the chosen installation directory.
    </p>

    <p class="firstpara">
      For csh or tcsh:
    </p>

    <pre class="example">setenv PATH <i><b><font color=green>INST_DIR</font></b></i>/bin:$PATH</pre>
    <pre class="example">setenv LD_LIBRARY_PATH <i><b><font color=green>INST_DIR</font></b></i>/lib:$LD_LIBRARY_PATH</pre>

    <p class="firstpara">
      For bash or ksh:
    </p>

    <pre class="example">export PATH=<i><b><font color=green>INST_DIR</font></b></i>/bin:$PATH</pre>
    <pre class="example">export LD_LIBRARY_PATH=<i><b><font color=green>INST_DIR</font></b></i>/lib:$LD_LIBRARY_PATH</pre>

    <p class="firstpara">
      Note that if the PATH and LD_LIBRARY_PATH variables were not already set,
      then the trailing :$PATH and/or :$LD_LIBRARY_PATH are not needed and may
      cause the command to fail.
    </p>

    <p class="firstpara">
      Also, for machines using rld (e.g. SGI machines) the environment 
      variable named above as LD_LIBRARY_PATH may need to changed to
      LD_LIBRARY32_PATH or LD_LIBRARY64_PATH depending upon the machine's
      default ABI (Application Binary Interface).
    </p>

<p class="head"><a name="Gotchas">Known Issues</a></p>
    <p class="firstpara">
	  This section describes known issues with installing and building SCIRun and 
	  it's required third party software.  It also includes solutions when available. 
    </p>

<p class="subhead">Path Specifications</p>
    <p class="firstpara">
	  If any of the software, SCIRun or thirdparty, is installed into a user's home
	  directory, <i><b>do not</b></i> use abbreviations such as tilde expansion
	  when specifying paths.  Instead, use full absolute paths.  For example, use
	  /home/bob/SCIRun instead of ~bob/SCIRun for the --prefix arguments when configuring.
	  Most abbreviation techniques will not get expanded by the build scripts for any of
	  the software.
    </p>

<p class="subhead">Building [incr Tcl/Tk]</p>
	<p class="firstpara">
	  The [incr Tcl/Tk] distribution listed in the system requirements has a bug in it:
	  The installation scripts are bundled without execute permissions.  Before attempting
	  to configure or make [incr Tcl/Tk], type the following commands:
	</p>

	<pre class="example"><font color=blue>cd itcl3.1.0/config
chmod a+x install-sh mkinstalldirs</font></pre>

	<p class="firstpara">
	  Then, proceed normally with the configure and make.
	</p>

<p class="subhead">Building BLT</p>
	<p class="firstpara">
	  The BLT make files have bugs in them that prevent building the necessary shared object
	  libraries.  To build the necessary files type the following, after configuring:
	</p>

	<pre class="example"><font color=blue>cd blt2.4u
make -k install
cd src/shared
make -k install</font>
	</pre>

<p class="subhead">Building Xerces-c</p>
	<p class="firstpara">
	  The make system for Xerces-c is not standard and has many bugs.  The following all apply
	  after configuring xerces.
	</p>

	<p class="firstpara">
	  After typing "make", but before compilation begins, the make system copies certain files around.
	  This copying is not specified in any dependancy tree, so using a -j flag (use multiple threads)
	  as a make argument will cause the build to fail.
	</p>

	<p class="firstpara">
	  There is no dependancy tree for the "install" target within the make files, so passing
	  install as an argument to the first time "make" is typed will cause the build to fail.
	  Instead type "make" first, then "make install".
	</p>

	<p class="firstpara">
	  The make system ignores errors in compilation and forces a link.  Verify that the build
	  was actually successful by checking the size of libxerces-c1_3.so.  The sizes should be:
	  ~2.1MB for SGI 32 bit, ~2.4MB for SGI 64 bit, and ~1.4MB for linux.
	</p>

	<p class="firstpara">
	  The install script the make system uses to install xerces has a bug: it copies it's
	  header files into the parent of /include rather than into /include itself.  After 
	  typing "make install", move the copied files from the parent into /include by hand.
	</p>

<p class="subhead">Building SCIRun</p>
	<p class="firstpara">
	  The configure script expects the OpenGL headers to live in /usr/include/GL or /usr/X11R6/include/GL.
	  Some linux distributions have the OpenGL headers installed in /usr/local/include/GL.  This is 
	  non-standard and should be corrected, as this may cause version conflicts with other pieces of 
	  software located in /usr/local.
	</p>

	<p class="firstpara">
	  SCIRun requires the full source of Tcl and Tk to be installed.  This is required because SCIRun
	  defines a few Tk widgets of it's own, and needs some headers from the source that aren't
	  included with typical installations.  If your system already has the correct Tcl and Tk versions
	  installed, you will have to re-install (see above) in order to have the sources included.
	</p>

	<p class="firstpara">
	  SCIRun has been successfully built on several versions of linux including Mandrake 7.2, SuSE 7.0,
	  and Debian 2.2.x (stable and unstable).  It has also been successfully installed (after much coaxing)
	  on Redhat systems.  In addition, it has been successfully installed on single and dual processor Intel
	  machines, and on single processor AMD machines.
	</p>

	<p class="firstpara">
	  <br><br><hr>
	</p>





