<!--
  The contents of this file are subject to the University of Utah Public
  License (the "License"); you may not use this file except in compliance
  with the License.
  
  Software distributed under the License is distributed on an "AS IS"
  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  License for the specific language governing rights and limitations under
  the License.
  
  The Original Source Code is SCIRun, released March 12, 2001.
  
  The Original Source Code was developed by the University of Utah.
  Portions created by UNIVERSITY are Copyright (C) 2001, 1994 
  University of Utah. All Rights Reserved.
-->

<chapter>
  <title>SCIRun Installation and Build Instructions</title>

  <sect1>
    <para>
      This chapter provides detailed instructions for installing and
      building SCIRun and it's packages.
    </para>
  </sect1>

  <sect1>
    <title>Prerequisites</title>
    <para>
      Use of this document requires experience with the SGI
      Irix operating system and/or the Linux operating system.
      Knowledge of file systems, programming in C/C++, building
      software from tarball distributions and shell scripting will
      be useful if not required.  The installation or upgrade of
      core system components (such as the OS and compilers) may be
      required.  As such, a system administrator's assistance may
      be warranted.
    </para>
  </sect1>

  <sect1>
    <title>Minimum System Software Requirements</title>

    <para>
      SCIRun is officially compatible with two platforms: SGI and Linux.
    </para>

    <para>
      The following table describes the minimum system software
      requirements for SCIRun.  Other versions may also work, but are not
      officially compatible.
    </para>

    <para>
      Click on the links in the
      table to get information about (software column) or to download
      (version column) the software.
    </para>

    <para>
      Refer to the chapter <ulink url="installguide.xml?cont=3&amp;dir=2">
      <citetitle>Third Party Software Installation and Build Information
      </citetitle></ulink> for information on installing the required software
      listed below.
    </para>

    &requirements;

  <sect2>
    <title>Minimum System Recommendations</title>

    &recommendations;

  </sect2>

  </sect1>

  <sect1>
    <title>Installing SCIRun and Packages</title>

    <para>
      <orderedlist>
        <listitem>
          <para>
            Obtain the source trees for SCIRun and any desired
            packages.
          </para>
          <para>          
            If you have access to the SCIRun CVS repository (i.e. you are
            a student or staff member of the SCI Institute), then contact a
            member of the senior staff for information regarding CVS access.
          </para>
          <para>
            Otherwise, go to the SCIRun 
            <a href="http://software.sci.utah.edu/software/download.xml?dir=0">download page</a>. 
          </para>
        </listitem>
        <listitem>
          <para>
            Unzip the SCIRun source tree into a directory of your
            choosing.
          </para>
          <para>
            The chosen directory will be referred to as 
            <term>INSTALL_DIR</term> from now on.
          </para>
          <para>
            SCIRun can be installed into any directory, within a user 
            home directory or a system application directory. There is
            no "make install" step in the build process, so SCIRun
            will be installed in the chosen directory. 
          </para> 
          <para>
            For example, if you choose to install SCIRun into user Bob's home
            directory, then 
          </para>
          <sect2>
            <para>
              <term>INSTALL_DIR</term> = /home/bob
            </para>
          </sect2>

          <para>
            Depending on how SCIRun was obtained, either 
          </para>

          <para>
            a) unzip and untar the SCIRun source tree:
          </para>
    
          <computeroutput>
            cd <term>INSTALL_DIR</term>
            gunzip SCIRun.x.x.x.tar.gz
            tar xvf SCIRun.x.x.x.tar
          </computeroutput>

          <para>
            or
          </para>

          <para>
            b) checkout the SCIRun source tree from the CVS repository:
          </para>

          <computeroutput>
            cd <term>INSTALL_DIR</term>
            cvs checkout SCIRun
          </computeroutput>

          <para>
            After installing, the <term>INSTALL_DIR</term>
            directory will have a sub directory named SCIRun.
          </para>

        </listitem>
        <listitem>
          Unzip the packages (if any) into /SCIRun/src/Packages.
        </listitem>
      </orderedlist>
    </para>          
  </sect1>

  <sect1>
    <title>Building SCIRun and Packages</title>

    <para>
      <orderedlist>
        <listitem>
          Ensure that the target install machine matches the above 
          system requirements.
        </listitem>
        <listitem>
          Run configure from a directory of your choosing.  The chosen
          directory will be referred to as <term>BUILD_DIR</term> from now on.
        </listitem>
        <listitem>
          Run GNU make in the <term>BUILD_DIR</term> directory.
        </listitem>
      </orderedlist>
    </para>
  </sect1>
</chapter>

<!--
    <p class="firstpara">
      <a name="instpackages"><b>3. Install the package(s) (if any) into 
         <b><i><font color=green>INSTALL_DIR</font></i></b>/SCIRun/src/Packages
	</b></a>
    </p>
      
    <p class="firstpara">
      Unzip and untar the package source tree into <b><i><font 
      color=green>INSTALL_DIR</font></i></b>/SCIRun/src/Packages.
        For example, if installing the BioPSE
      package:
    </p>
    
    <pre class="example"><font color=blue>cd <b><i><font
	color=green>INSTALL_DIR</font></i></b>/SCIRun/src/Packages
gunzip BioPSE.PKG.x.x.x.tar.gz
tar xvf BioPSE.PKG.x.x.x.tar</font>
    </pre>

<p class="head"><a name="Building">Building SCIRun and Packages</a></p>
  <p class="firstpara">
    <b>1. Ensure that the target install machine
      matches the above system requirements.</b>
  </p>

  <p class="firstpara">
    See the <a href="ThirdpartyInfo.html">Thirdparty Software Installation and Build Instructions</a> for more information.

  <p class="firstpara">
    <a name="Configure">
    <b>2. Run configure from a directory of your choosing.</b></a>
  </p>

  <p class="firstpara"> 
    The chosen configure directory will be referred to as <b><i><font
    color=green>BUILD_DIR</font></i></b> from now on.
  </p>

  <p class="firstpara">
    An example of a typical configure command:
  </p>

  <pre class="example"><b><i><font
      color="green">INSTALL_DIR</font></i></b><font color="blue">/SCIRun/src/configure -=with-thirdparty=/usr/local/SCIRun_Thirdparty_32 \<br>
                                 -=enable-package="<b><i><font
    color="green">PACKNAME_1 PACKNAME_2 ...</font></i></b>" </font>
  </pre>

    <p class="firstpara">
      Where <b><i><font
      color=green>PACKNAME_X</font></i></b> is the name of a SCIRun package
      installed above.
    </p>

    
<p class="firstpara"> There are many options for configuring SCIRun with location 
  as the chief option. SCIRun can be configured from within the <b><i><font color=green>INSTALL_DIR</font></i></b>/SCIRun/src 
  directory, as is commonly done: </p>

    <pre class="example"><font color=blue>cd <b><i><font color=green>INSTALL_DIR</font></i></b>/SCIRun/src
./configure <b><i><font color=green>CONFIGURE_OPTIONS</font></i></b></font>
    </pre>

    <p class="firstpara">
      Configuring in the source directory yields:
    </p>

    <pre class="example"><b><i><font color=green>BUILD_DIR</font></i></b> = <b><i><font color=green>INSTALL_DIR</font></i></b>/SCIRun/src
    </pre>

    
<p class="firstpara"> However, SCIRun can also be configured from locations other 
  than the source directory which allows for having builds for multiple platforms, 
  or for multiple ABI's (Applications Binary Interface) while sharing a single 
  source directory: </p>

    <pre class="example"><font color="blue">cd <b><i><font color="green">INSTALL_DIR</font></i></b>/SCIRun
mkdir linux
mkdir sgi32
mkdir sgi64
cd linux
../src/configure <b><i><font color="green">CONFIGURE_OPTIONS</font></i></b>
cd ../sgi32
../src/configure <b><i><font color="green">CONFIGURE_OPTIONS</font></i></b>
cd ../sgi64
../src/configure -=enable-64bit <b><i><font color="green">CONFIGURE_OPTIONS</font></i></b></font>
    </pre>

    <p class="firstpara">
      The <b><i><font color=green>BUILD_DIR</font></i></b>'s for the above, in order, would be:
    </p>

    <pre class="example"><b><i><font color=green>BUILD_DIR</font></i></b> = <b><i><font color=green>INSTALL_DIR</font></i></b>/SCIRun/linux
<b><i><font color=green>BUILD_DIR</font></i></b> = <b><i><font color=green>INSTALL_DIR</font></i></b>/SCIRun/sgi32
<b><i><font color=green>BUILD_DIR</font></i></b> = <b><i><font color=green>INSTALL_DIR</font></i></b>/SCIRun/sgi64
    </pre>

    
<p class="firstpara"> In addition to the configure location, there are several 
  options that may be invoked at configure time by supplying the configure with 
  arguments. The available <b><i><font color=green>CONFIGURE_OPTIONS</font></i></b> 
  can be found in the <a href="#conftable">appendix</a> below. </p>

    <p class="firstpara">   
      <a name="Make"><b>3. Run GNU make in the <i><font
      color=green>BUILD_DIR</font></i> directory</b>.</a>
    </p>

    <p class="firstpara">
      To run GNU make, simply type:
    </p>

    <pre class="example"><font color=blue>make</font></pre>

    <p class="firstpara">
      or
    </p>

    <pre class="example"><font color=blue>gmake</font></pre>
      
    <p class="firstpara">
      Depending on how the command for GNU make is spelled on the target
      install machine.
    </p>

    
<p class="firstpara"> Just like configure, GNU make has some useful options. The 
  "number of jobs" option, is the most commonly used option for building SCIRun 
  : </p>

    <pre class="example"><font color=blue>gmake -j <b><i><font color=green>NUM_JOBS</font></i></b></font></pre>

    
<p class="firstpara"> Where <b><i><font color=green>NUM_JOBS</font></i></b> is 
  an integer. If the target install machine has multiple processors, setting <b><i><font color=green>NUM_JOBS</font></i></b> 
  to the number of processors available uses all the processors to build SCIRun 
  in parallel, often significantly speeding up the time to build SCIRun. </p>

    
<p class="firstpara"> Additional options for GNU make can be found <a href=http://www.gnu.org/manual/make/html_mono/make.html#SEC92>here</a>. 
</p>

<p class="head"><a name="RunningSCIRun">Running SCIRun</a></p>
    <P class="firstpara">
      After a successful build, there will be an executable in
      the <i><b><font color=green>BUILD_DIR</font></b></i> directory named:
    </P>

    <pre class="example"><font color=blue>scirun</font>
    </pre>

    <p class="firstpara">
      Running this will open the SCIRun network editor window and start
      a console (called the SCIRun console) in the shell where scirun was
      started from.
    </p>   

    <p class="firstpara">
      If the window does not appear, note any errors
      displayed in the SCIRun console and see the getting
      help section below.  Of course, it might just be
      hiding behind other windows on the desktop!
    </p>

<p class="head"><a name="AdditionalDocs">Additional Documentation</a></p>
    <p class="firstpara">
      Additional Documentation about SCIRun can be obtained on
      the web at:
    </p>

    <pre class="example"><A HREF="http://software.sci.utah.edu/software/doc/index.html">
http://software.sci.utah.edu/software/doc/index.html</A>
    </pre>

<p class="head"><a name="GettingHelp">Getting Help</a></p>
    <p class="firstpara">
      There is a mailing list available for asking questions about
      using or installing SCIRun or to get help with resolving a problem.
        To subscribe to the mailing list, send email to:
    </p>

    <A HREF="mailto:majordomo@cs.utah.edu"><pre class="example">majordomo@cs.utah.edu</pre></A>

    <p class="firstpara">
      with the following in the body of the message:
    </p>

    <pre class="example"><font color=blue>subscribe scirun-users</font>
    </pre>

    <p class="firstpara">
      To use the mailing list, simply send your question or problem
      as an email to the list:
    </p>

    <A HREF="mailto:scirun-users@cs.utah.edu"><pre class="example">scirun-users@cs.utah.edu</pre></A>

    <P class="firstpara">
      To aid in problem resolution, include a verbatim (cut and paste) copy of
      the error(s) displayed (if any).  Also include a short description of
      what you we're doing (running a network, building the tree, etc.) and
      which version of SCIRun you have.
    </P>

<p class="head"><a name="Gotchas">Known Issues</a></p>
  <p class="firstpara">
    This section describes known issues with installing and building SCIRun.
    It also includes solutions when available. 
  </p>

<p class="subhead">Building on Red Hat linux doesn't work</p>
    <p class="firstpara">
      Red Hat linux (version 7.0) is shipped with a version of the GNU 
      Compiler Collection (GCC) that does not work for building SCIRun.  Please
      see <a href=http://www.gnu.org/software/gcc/gcc-2.96.html>
      http://www.gnu.org/software/gcc/gcc-2.96.html</a> for details.
      If you are using Red Hat, you should install GCC version 2.95.2 or
      2.95.3.  Red Hat 7.0 also ships with other required software (e.g. Tcl
      distributions) that will need to be upgraded.
    </p>

<p class="subhead">Path Specifications</p>
    <p class="firstpara">
     If any of the software, SCIRun or thirdparty, is installed into a user's
     home directory, <i><b>do not</b></i> use abbreviations such as tilde
     expansion when specifying paths.  Instead, use full absolute paths.
     For example, use /home/bob/SCIRun instead of ~bob/SCIRun for the 
     -=prefix arguments when configuring.  Most abbreviation techniques will
     not get expanded by the build scripts for any of the software.
    </p>

<p class="subhead">Configuring SCIRun</p>
  <p class="firstpara">
    The configure script expects the OpenGL headers to live in /usr/include/GL
    or /usr/X11R6/include/GL.
    Some linux distributions have the OpenGL headers installed in
    /usr/local/include/GL.  This is 
    non-standard and should be corrected, as this may cause version
    conflicts with other pieces of  
    software located in /usr/local.
  </p>

<p class="subhead">Full source of Tcl and Tk required</p>
  <p class="firstpara">
    SCIRun currently requires the full source of Tcl and Tk to be installed.
    This is required because SCIRun defines a few Tk widgets of it's own, and
    needs some headers from the source that aren't included with typical
    installations.  If your system already has the correct Tcl and Tk versions
    installed, you will have to re-install (see above) in order to have the
    sources included.
  </p>

<p class="head"><a name="tested">Tested PC Systems</a></p>

<p class="subhead">linux distributions</p>
  <p class="firstpara">
    SCIRun has been built and tested on several flavors of linux
    including:
  </p>

  <p class="firstpara">
    Mandrake 8.0 (need to add zlib headers)<br>
    Mandrake 7.2 (most out-of-box solution)<br>
    SuSE 7.0 professional<br>
    Debian (need to be a deb-head!)<br>
    RedHat 7.0 (requires many updates first)
  </p>
  
<p class="subhead">Processors</p>
  <p class="firstpara">
    SCIRun has been built and tested on the following processor configurations:
  </p>

  <p class="firstpara">
    Single Intel Pentium II<br>
    Dual Intel Pentium II<br>
    Single Intel Pentium III<br>
    Dual Intel Pentium III<br>
    Single Intel Pentium 4<br>
    Single AMD Athlon
  </p>

<p class="subhead">Graphics cards</p>
  <p class="firstpara">
  </p>

  <p class="Firstpara">
    SCIRun has been tested using NVIDIA GeForce and Quadro
    graphics cards for hardware accelerated 3D OpenGL in XFree86 version 4.1.0
    using the 1.0-1251 drivers, on both Intel and AMD machines.
  </p>

<p class="head"><a name="Appendix">Appendix</a></p>

<p class="subhead"><a name="conftable">Configure options for SCIRun</a></p>

    <p class="firstpara">
      <table border="2" cellspacing="2" cellpadding="4">
      <tr><td>-=enable-package</td><td>Compile the listed packages.  SCIRun
      modules are compiled automatically.  To also build the BioPSE and
      Uintah modules, use:
      -=enable-package="BioPSE Uintah".</td></tr>
      <tr><td>-=enable-exename</td><td>Overrides the default executable name
      for SCIRun.  The default is scirun.</td></tr>
      <tr><td>-=enable-threads</td><td>Threads are always enabled, but this
      allows one to use a different implementation.  On the SGI,
      -=enable-threads=pthreads and -=enable-threads=sproc (default) are
      supported.  On other platforms, only -=enable-threads=pthreads is
      supported.</td></tr>
      <tr><td>-=enable-debug</td><td>Turn on debugging.  To simply use "-g",
      just use -=enable-debug.  To use flags other than "-g", use
      -=enable-debug="-myflags".</td></tr>
      <tr><td>-=enable-optimize</td><td>Turn on optimization.
      To simply use "-O2",
      just use -=enable-optimize.  To use flags other than "-O2", use
      -=enable-optimize="-myflags".</td></tr>
      <tr><td>-=enable-largesos</td><td>Instead of building a shared object
      per subdirectory, build a few "large" shared objects for the top level
      subdirectories.  This is more appropriate for distribution, and
      -=disable-largesos (the default) is more appropriate for
      development.</td></tr>
      <tr><td>-=enable-64bit</td><td>Compile in 64 bit mode.  Currently
      supported only on the SGI.</td></tr>
      <tr><td>-=enable-assertion-level=N</td><td>Set the level of assertions
      to the level N.  0 means no assertions are caught, and level 3 (the
      default) performs extensive checking (including array bounds
      checks).</td></tr>
      <tr><td>-=enable-parallel</td><td>Enable the "distributed memory"
      parallel SCIRun.  This requires the globus library (see the next
      flag).</td></tr>
      <tr><td>-=with-globus=GLOBUS_DIR</td><td>Uses the globus libraries in
      GLOBUS_DIR.</td></tr>
      <tr><td>-=with-thirdparty=INST_DIR</td><td>INST_DIR = the directory
      containing the /bin, /lib, /include and directories for all the required
      thirdparty software.</td></tr>
      <tr><td>-=with-tcl=INST_DIR</td><td>INST_DIR = the directory containing
      the /bin, /lib, and /include directories for the Tcl distribution.
      </td></tr>
      <tr><td>-=with-tk=INST_DIR</td><td>INST_DIR = the directory containing
      the /bin, /lib, and /include directories for the Tk distribution.
      defaults to value given by -=with-tcl.</td></tr>
      <tr><td>-=with-itcl=INST_DIR</td><td>INST_DIR = the directory containing
      the /bin, /lib, and /include directories for the [incr Tcl/Tk]
      distributions.  defaults to value given by -=with-tcl.</td></tr>
      <tr><td>-=with-blt=INST_DIR</td><td>INST_DIR = the directory containing
      the /bin, /lib, and /include directories for the BLT distribution.
      defaults to value given by -=with-tcl.</td></tr>
      <tr><td>-=with-xerces=INST_DIR</td><td>INST_DIR = the directory
      containing the /bin, /lib, and /include directories for the Xerces-C
      distribution.
      </td></tr>
      <tr><td>-=with-mpeg[=INST_DIR]</td><td>INST_DIR = an optional
      argument for specifying the directory containing the /lib and
      /include directories for the mpeg_encode distribution.  If an
      INST_DIR is not specified, then the default SCIRun_Thirdparty
      directory will be assumed.  If the required header and library
      files are not found, or if this option is not specified, the
      Viewer rendering module will not have support for saving out
      MPEG movies.
      </td></tr>
      <tr><td>-=with-nrrd=INST_DIR</td><td>INST_DIR = the directory
      containing the /lib and /include directories for Gordon
      Kindlmann's Nrrd (Nearly Raw Raster Data) distribution.  This
      optional flag is only valid if the Nrrd pacakge has been enabled
      (using -=enable-package).  If it has, this flag is only
      necessary to specify a location other than the default
      SCIRun_Thirdparty directory.  The Nrrd package contains modules
      for converting between SCIRun Fields and Nrrds, for reading and
      writing Nrrds, and wrappers for invoking Nrrd raster processing
      algorithms.
      </td></tr>
      </table>
    <p></p>
-->
